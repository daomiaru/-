{"version":3,"sources":["webpack:///E:/2016171102李冠儒毕设源码/凉安租房/main.js","webpack:///E:/2016171102李冠儒毕设源码/凉安租房/pages/im-chat/im-chat.vue?ac82","webpack:///E:/2016171102李冠儒毕设源码/凉安租房/pages/im-chat/im-chat.vue?9c51","webpack:///E:/2016171102李冠儒毕设源码/凉安租房/pages/im-chat/im-chat.vue?aa99","webpack:///E:/2016171102李冠儒毕设源码/凉安租房/pages/im-chat/im-chat.vue?9c7b","webpack:///E:/2016171102李冠儒毕设源码/凉安租房/pages/im-chat/im-chat.vue","webpack:///E:/2016171102李冠儒毕设源码/凉安租房/pages/im-chat/im-chat.vue?62f8","webpack:///E:/2016171102李冠儒毕设源码/凉安租房/pages/im-chat/im-chat.vue?bdad"],"names":["createPage","Page","_self","components","uniLoadMore","computed","emojiList","get","imUtils","set","data","textMsg","isHistoryLoading","scrollAnimation","scrollTop","scrollToView","msgList","msgImgList","myuid","loadHistoryLimit","getMsgListLimit","chartUser","offset","ifHaveMore","loadingText","contentdown","contentrefresh","contentnomore","RECORDER","uni","getRecorderManager","isVoice","voiceTis","recordTis","recording","willStop","initPoint","identifier","Y","recordTimer","recordLength","AUDIO","createInnerAudioContext","playMsgid","VoiceTimer","popupLayerClass","hideMore","hideEmoji","onLoad","option","onEnded","res","onStart","e","recordBegin","onStop","recordEnd","onShow","methods","getMockMsgList","list","type","msg","id","time","userinfo","uid","username","face","content","text","url","length","sort","compareAscSort","i","setPicSize","push","$nextTick","screenMsg","console","log","addSystemTextMsg","addSystemRedEnvelopeMsg","addTextMsg","addVoiceMsg","addImgMsg","addRedEnvelopeMsg","msgId","vibrateLong","loadHistory","Viewid","setTimeout","params","jpushIM","getHistoryMessages","errorCode","setList","unshift","getMsgList","showToast","title","errorMsg","icon","maxW","upx2px","maxH","w","h","scale","items","newItems","forEach","item","setSingItem","today","Date","getTime","messageType","replaceEmoji","messageString","extras","timestamp","dateUtils","formatDateTime","serverMessageId","messageId","status","flagString","fromUser","nickname","avatar","showMore","openDrawer","hideDrawer","chooseImage","getImage","camera","sourceType","sizeType","success","getImageInfo","src","tempFilePaths","image","width","height","sendMsg","chooseEmoji","addEmoji","em","alt","textareaFocus","sendText","duration","$store","dispatch","then","response","showModal","showCancel","cancelText","confirmText","JSON","stringify","sendSystemMsg","lastid","row","toDetails","rid","navigateTo","showPic","previewImage","indicator","current","urls","playVoice","play","voiceBegin","touches","clientY","start","format","setInterval","voiceCancel","stop","voiceIng","touche","voiceEnd","clearInterval","tempFilePath","min","parseInt","sec","switchVoice","discard","watch","receiveMessage","resetUnreadMessageCount","setMessageHaveRead","sendMessageResponse","toUser"],"mappings":"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","file":"pages/im-chat/im-chat.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/im-chat/im-chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./im-chat.vue?vue&type=template&id=276cc827&\"\nvar renderjs\nimport script from \"./im-chat.vue?vue&type=script&lang=js&\"\nexport * from \"./im-chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./im-chat.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('276cc827')) {\n      api.createRecord('276cc827', component.options)\n    } else {\n      api.reload('276cc827', component.options)\n    }\n    module.hot.accept(\"./im-chat.vue?vue&type=template&id=276cc827&\", function () {\n      api.rerender('276cc827', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"2016171102李冠儒毕设源码/凉安租房/pages/im-chat/im-chat.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./im-chat.vue?vue&type=template&id=276cc827&\"","var components = {\n  \"uni-load-more\": () =>\n    import(/* webpackChunkName: \"components/uni-load-more/uni-load-more\" */ \"@/components/uni-load-more/uni-load-more.vue\")\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./im-chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./im-chat.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tmapState,\n\tmapMutations\n} from 'vuex'\n\nimport uniLoadMore from '@/components/uni-load-more/uni-load-more.vue'\n\nvar _self;\n\nexport default {\n\tcomponents: {\n\t\tuniLoadMore\n\t},\n\tcomputed: {\n\t\t...mapState(['hasLogin', 'loginProvider','nickname','avatar','receiveMessage','sendMessageResponse']),\n\t\temojiList: {\n\t\t\tget: function() {\n\t\t\t\treturn this.imUtils.emojiList\n\t\t\t},\n\t\t\tset: function() {}\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t//文字消息\n\t\t\ttextMsg:'',\n\t\t\t//消息列表\n\t\t\tisHistoryLoading:false,\n\t\t\tscrollAnimation:false,\n\t\t\tscrollTop:0,\n\t\t\tscrollToView:'',\n\t\t\tmsgList:[],\n\t\t\tmsgImgList:[],\n\t\t\tmyuid:\"\",\n\t\t\tloadHistoryLimit:10,// 每次加载历史记录条数\n\t\t\tgetMsgListLimit:10,\t// 初始化记录的条数\n\t\t\tchartUser: {}, \t\t// 聊天对象的相关信息\n\t\t\toffset: 0, \t\t\t// 从第几条开始，每获取过一条，+1\n\t\t\tifHaveMore:true,\t// 是否还有更多\n\t\t\tloadingText:{\n\t\t\t\tcontentdown: '上拉显示更多',\n\t\t\t\tcontentrefresh: '', // 发送消息以后，loading出现，不需要文字\n\t\t\t\tcontentnomore: '没有更多数据了'\n\t\t\t},\n\t\t\t//录音相关参数\n\n\t\t\t//H5不能录音\n\t\t\tRECORDER:uni.getRecorderManager(),\n\n\t\t\tisVoice:false,\n\t\t\tvoiceTis:'按住 说话',\n\t\t\trecordTis:\"手指上滑 取消发送\",\n\t\t\trecording:false,\n\t\t\twillStop:false,\n\t\t\tinitPoint:{identifier:0,Y:0},\n\t\t\trecordTimer:null,\n\t\t\trecordLength:0,\n\t\t\t\n\t\t\t//播放语音相关参数\n\t\t\tAUDIO:uni.createInnerAudioContext(),\n\t\t\tplayMsgid:null,\n\t\t\tVoiceTimer:null,\n\t\t\t// 抽屉参数\n\t\t\tpopupLayerClass:'',\n\t\t\t// more参数\n\t\t\thideMore:true,\n\t\t\t//表情定义\n\t\t\thideEmoji:true,\n\t\t};\n\t},\n\tonLoad(option) {\n\t\t_self = this;\n\t\t\n\t\t// 赋值聊天对象的username，nickname等信息\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t\t\n\n\n\n\t\t\n\t\t//语音自然播放结束\n\t\tthis.AUDIO.onEnded((res)=>{\n\t\t\tthis.playMsgid=null;\n\t\t});\n\n\t\t//录音开始事件\n\t\tthis.RECORDER.onStart((e)=>{\n\t\t\tthis.recordBegin(e);\n\t\t})\n\t\t//录音结束事件\n\t\tthis.RECORDER.onStop((e)=>{\n\t\t\tthis.recordEnd(e);\n\t\t})\n\n\t\t\n\t},\n\tonShow(){\n\t\tthis.scrollTop = 9999999;\n\t},\n\tmethods:{\n\t\t...mapMutations(['login','logout']),\n\t\tgetMockMsgList(){\n\t\t\tlet list = [\n\t\t\t\t{type:\"user\",msg:{id:1,type:\"text\",time:\"12:56\",userinfo:{uid:0,username:\"大黑哥\",face:\"/static/img/face.jpg\"},content:{text:\"为什么温度会相差那么大？\"}}},\n\t\t\t\t{type:\"user\",msg:{id:2,type:\"text\",time:\"12:57\",userinfo:{uid:1,username:\"售后客服008\",face:\"/static/img/im/face/face_2.jpg\"},content:{text:\"这个是有偏差的，两个温度相差十几二十度是很正常的，如果相差五十度，那即是质量问题了。\"}}},\n\t\t\t\t{type:\"user\",msg:{id:3,type:\"voice\",time:\"12:59\",userinfo:{uid:1,username:\"售后客服008\",face:\"/static/img/im/face/face_2.jpg\"},content:{url:\"/static/voice/1.mp3\",length:\"00:06\"}}},\n\t\t\t\t{type:\"user\",msg:{id:4,type:\"voice\",time:\"13:05\",userinfo:{uid:0,username:\"大黑哥\",face:\"/static/img/face.jpg\"},content:{url:\"/static/voice/2.mp3\",length:\"00:06\"}}},\n\t\t\t]\n\t\t\tlist.sort(this.imUtils.compareAscSort(\"timestamp\")); // 按指定字段排序\n\t\t\t// 获取消息中的图片,并处理显示尺寸\n\t\t\tfor(let i=0;i<list.length;i++){\n\t\t\t\tif(list[i].type=='user'&&list[i].msg.type==\"img\"){\n\t\t\t\t\tlist[i].msg.content = this.setPicSize(list[i].msg.content);\n\t\t\t\t\tthis.msgImgList.push(list[i].msg.content.url);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.msgList = list;\n\t\t\t// 滚动到底部\n\t\t\tthis.$nextTick(function() {\n\t\t\t\t//进入页面滚动到底部\n\t\t\t\tthis.scrollTop = 9999;\n\t\t\t\tthis.$nextTick(function() {\n\t\t\t\t\tthis.scrollAnimation = true;\n\t\t\t\t});\n\t\t\t});\n\t\t\t// 如果长度不足10条，就表示没有下一页了\n\t\t\tif(list.length < this.getMsgListLimit){\n\t\t\t\tthis.ifHaveMore = false;\n\t\t\t}\n\t\t},\n\t\t// 接受消息(筛选处理)\n\t\tscreenMsg(msg){\n\t\t\tconsole.log(222)\n\t\t\tconsole.log(msg)\n\t\t\t// 调用IM发送消息方法，进行筛选处理\n\t\t\tif(msg.type=='system'){\n\t\t\t\t// 系统消息\n\t\t\t\tswitch (msg.msg.type){\n\t\t\t\t\tcase 'text':\n\t\t\t\t\t\tthis.addSystemTextMsg(msg);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'redEnvelope':\n\t\t\t\t\t\tthis.addSystemRedEnvelopeMsg(msg);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else if(msg.type=='user'){\n\t\t\t\t// 用户消息\n\t\t\t\tswitch (msg.msg.type){\n\t\t\t\t\tcase 'text':\n\t\t\t\t\t\t// 文字消息\n\t\t\t\t\t\tthis.addTextMsg(msg);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'voice':\n\t\t\t\t\t\tthis.addVoiceMsg(msg);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'img':\n\t\t\t\t\t\t// 图片消息\n\t\t\t\t\t\tthis.addImgMsg(msg);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'redEnvelope':\n\t\t\t\t\t\tthis.addRedEnvelopeMsg(msg);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.$nextTick(function() {\n\t\t\t\t\t// 滚动到底\n\t\t\t\t\tthis.scrollToView = msg.msg.msgId\n\t\t\t\t});\n\t\t\t\t// console.log('用户消息');\n\t\t\t\t//非自己的消息震动\n\t\t\t\tif(msg.msg.userinfo.uid!=this.myuid){\n\t\t\t\t\t// console.log('振动');\n\t\t\t\t\tuni.vibrateLong();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t},\n\t\t\n\t\t//触发滑动到顶部(加载历史信息记录)\n\t\tloadHistory(e){\n\t\t\tif(this.isHistoryLoading){\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tif(this.ifHaveMore == false){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.isHistoryLoading = true;//参数作为进入请求标识，防止重复请求\n\t\t\tthis.scrollAnimation = false;//关闭滑动动画\n\t\t\t\n\t\t\tlet Viewid = this.msgList[0].msg.msgId;//记住第一个信息ID\n\t\t\t//请求历史记录效果\n\t\t\tsetTimeout(()=>{\n\t\t\t\tvar params = {\n\t\t\t\t\t\"type\":\"single\",\n\t\t\t\t\t\"username\": _self.chartUser.username,\n\t\t\t\t\t\"from\": _self.offset, // 从第几条开始\n\t\t\t\t\t\"limit\": _self.loadHistoryLimit, // 历史记录每次加载10条\n\t\t\t\t};\n\t\t\t\t// console.log(\"JMessagePlugin getHistoryMessages获取历史消息记录传参：\" + JSON.stringify(params));\n\t\t\t\t_self.jpushIM.getHistoryMessages(params, (res) => {\n\t\t\t\t\tif(res.errorCode == 0){\n\t\t\t\t\t\tvar list = _self.setList(res.data);\n\t\t\t\t\t\t// console.log(\"JMessagePlugin getHistoryMessages处理过的消息体：\" + JSON.stringify(list));\n\t\t\t\t\t\t// 获取消息中的图片,并处理显示尺寸\n\t\t\t\t\t\tfor(let i=0;i<list.length;i++){\n\t\t\t\t\t\t\tif(list[i].type=='user'&&list[i].msg.type==\"img\"){\n\t\t\t\t\t\t\t\tlist[i].msg.content = _self.setPicSize(list[i].msg.content);\n\t\t\t\t\t\t\t\t_self.msgImgList.unshift(list[i].msg.content.url);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t_self.msgList.unshift(list[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//这段代码很重要，不然每次加载历史数据都会跳到顶部\n\t\t\t\t\t\t_self.$nextTick(function() {\n\t\t\t\t\t\t\t_self.scrollToView = Viewid;//跳转上次的第一行信息位置\n\t\t\t\t\t\t\t_self.$nextTick(function() {\n\t\t\t\t\t\t\t\t_self.scrollAnimation = true;//恢复滚动动画\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// 如果长度不足10条，就表示没有下一页了\n\t\t\t\t\t\tif(list.length < _self.loadHistoryLimit){\n\t\t\t\t\t\t\t_self.ifHaveMore = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_self.isHistoryLoading = false;\n\t\t\t\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\t_self.ifHaveMore = false;\n\t\t\t\t\t\t_self.isHistoryLoading = false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t\t\n\t\t\t},1000)\n\t\t},\n\t\t// 加载初始页面消息\n\t\tgetMsgList(){\n\t\t\t// 消息列表\n\t\t\tvar params = {\n\t\t\t\t\"type\":\"single\",\n\t\t\t\t\"username\": this.chartUser.username,\n\t\t\t\t\"from\": this.offset, // 从第几条开始\n\t\t\t\t\"limit\": this.loadHistoryLimit, // 历史记录每次加载10条\n\t\t\t};\n\t\t\t// console.log(\"JMessagePlugin getHistoryMessages初始化传参：\" + JSON.stringify(params));\n\t\t\tthis.jpushIM.getHistoryMessages(params, (res) => {\n\t\t\t\tif(res.errorCode == 0){\n\t\t\t\t\t// console.log(res.data);\n\t\t\t\t\tif(res.data.length<1){\n\t\t\t\t\t\t// 没有历史记录\n\t\t\t\t\t\tthis.ifHaveMore = false;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tvar list = this.setList(res.data);\n\t\t\t\t\tlist.sort(this.imUtils.compareAscSort(\"timestamp\")); // 按指定字段排序\n\t\t\t\t\t// 获取消息中的图片,并处理显示尺寸\n\t\t\t\t\tfor(let i=0;i<list.length;i++){\n\t\t\t\t\t\tif(list[i].type=='user'&&list[i].msg.type==\"img\"){\n\t\t\t\t\t\t\tlist[i].msg.content = this.setPicSize(list[i].msg.content);\n\t\t\t\t\t\t\tthis.msgImgList.push(list[i].msg.content.url);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.msgList = list;\n\t\t\t\t\t// 滚动到底部\n\t\t\t\t\tthis.$nextTick(function() {\n\t\t\t\t\t\t//进入页面滚动到底部\n\t\t\t\t\t\tthis.scrollTop = 9999;\n\t\t\t\t\t\tthis.$nextTick(function() {\n\t\t\t\t\t\t\tthis.scrollAnimation = true;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\t// 如果长度不足10条，就表示没有下一页了\n\t\t\t\t\tif(list.length < this.getMsgListLimit){\n\t\t\t\t\t\tthis.ifHaveMore = false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tthis.ifHaveMore = false;\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: res.errorMsg,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t//处理图片尺寸，如果不处理宽高，新进入页面加载图片时候会闪\n\t\tsetPicSize(content){\n\t\t\t// 让图片最长边等于设置的最大长度，短边等比例缩小，图片控件真实改变，区别于aspectFit方式。\n\t\t\tlet maxW = uni.upx2px(350);//350是定义消息图片最大宽度\n\t\t\tlet maxH = uni.upx2px(350);//350是定义消息图片最大高度\n\t\t\tif(content.w>maxW||content.h>maxH){\n\t\t\t\tlet scale = content.w/content.h;\n\t\t\t\tcontent.w = scale>1?maxW:maxH*scale;\n\t\t\t\tcontent.h = scale>1?maxW/scale:maxH;\n\t\t\t}\n\t\t\treturn content;\n\t\t},\n\t\t// 设置列表，items是sdk返回来的列表\n\t\tsetList: function(items) {\n\t\t\tvar newItems = [];\n\t\t\titems.forEach((e) => {\n\t\t\t\tif (e) {\n\t\t\t\t\tthis.offset++;\n\t\t\t\t\tvar item = this.setSingItem(e,\"user\");\n\t\t\t\t\t// console.log(\"JMessagePlugin 消息体为： \" + JSON.stringify(item));\n\t\t\t\t\tnewItems.push(item);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn newItems;\n\t\t},\n\t\t/**\n\t\t * 处理单条sdk的message消息转为遍历中规定的消息体\n\t\t * @param {Object} item 完整的item对象，sdk的message格式\n\t\t * @param {Object} type 需要处理类型，支持user / system\n\t\t */\n\t\tsetSingItem:function(item,type){\n\t\t\tvar content = {};\n\t\t\tvar today = new Date().getTime();\n\t\t\tif(item.messageType == \"text\"){\n\t\t\t\t// 文字消息\n\t\t\t\tcontent = {\n\t\t\t\t\ttext:_self.imUtils.replaceEmoji(item.messageString),\n\t\t\t\t}\n\t\t\t}else if(item.messageType == \"img\"){\n\t\t\t\t// 图片消息\n\t\t\t\tcontent = {\n\t\t\t\t\turl:item.messageString,\n\t\t\t\t\tw:item.extras.w,\t// 这里的附加数是在upload的时候就带上去的\n\t\t\t\t\th:item.extras.h,\n\t\t\t\t}\n\t\t\t}else if(item.messageType == \"voice\"){\n\t\t\t\tcontent = {\n\t\t\t\t\turl:item.messageString,\n\t\t\t\t\tlength:item.extras.length,\t// 这里的附加数是在upload的时候就带上去的\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar time;\n\t\t\tif((today - item.timestamp) < 86400000){\n\t\t\t\ttime = this.dateUtils.formatDateTime((item.timestamp), \"H:i:s\");\n\t\t\t}else{\n\t\t\t\ttime = this.dateUtils.formatDateTime((item.timestamp), \"str\");\n\t\t\t};\n\t\t\treturn {\n\t\t\t\ttype:type,\n\t\t\t\ttimestamp:item.timestamp,\n\t\t\t\tmsg:{\n\t\t\t\t\tid:item.serverMessageId,\t// 服务器端对应的消息 Id\n\t\t\t\t\tmsgId:item.msgId,\t\t\t// msgId Android中做过处理\n\t\t\t\t\tmessageId:item.messageId,\t// 本地数据库中的消息 Id。\n\t\t\t\t\ttype:item.messageType,\n\t\t\t\t\tstatus:item.status,\n\t\t\t\t\tflagString:item.flagString,\n\t\t\t\t\ttime:time,\n\t\t\t\t\tuserinfo:{\n\t\t\t\t\t\tuid:item.fromUser.username,\n\t\t\t\t\t\tusername:item.fromUser.nickname,\n\t\t\t\t\t\tface:item.fromUser.avatar?item.fromUser.avatar:\"/static/img/face.jpg\",// 聊天人的头像\n\t\t\t\t\t},\n\t\t\t\t\tcontent:content,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\t//更多功能(点击+弹出) \n\t\tshowMore(){\n\t\t\tthis.isVoice = false;\n\t\t\tthis.hideEmoji = true;\n\t\t\tif(this.hideMore){\n\t\t\t\tthis.hideMore = false;\n\t\t\t\tthis.openDrawer();\n\t\t\t}else{\n\t\t\t\tthis.hideDrawer();\n\t\t\t}\n\t\t},\n\t\t// 打开抽屉\n\t\topenDrawer(){\n\t\t\tthis.popupLayerClass = 'showLayer';\n\t\t},\n\t\t// 隐藏抽屉\n\t\thideDrawer(){\n\t\t\tthis.popupLayerClass = '';\n\t\t\tsetTimeout(()=>{\n\t\t\t\tthis.hideMore = true;\n\t\t\t\tthis.hideEmoji = true;\n\t\t\t},150);\n\t\t},\n\t\t// 选择图片发送\n\t\tchooseImage(){\n\t\t\tthis.getImage('album');\n\t\t},\n\t\t//拍照发送\n\t\tcamera(){\n\t\t\tthis.getImage('camera');\n\t\t},\n\t\t//选照片 or 拍照\n\t\tgetImage(type){\n\t\t\tthis.hideDrawer();\n\t\t\tuni.chooseImage({\n\t\t\t\tsourceType:[type],\n\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n\t\t\t\tsuccess: (res)=>{\n\t\t\t\t\tfor(let i=0;i<res.tempFilePaths.length;i++){\n\t\t\t\t\t\tuni.getImageInfo({\n\t\t\t\t\t\t\tsrc: res.tempFilePaths[i],\n\t\t\t\t\t\t\tsuccess: (image)=>{\n\t\t\t\t\t\t\t\t// console.log(image.width);\n\t\t\t\t\t\t\t\t// console.log(image.height);\n\t\t\t\t\t\t\t\tlet msg = {url:res.tempFilePaths[i],w:image.width,h:image.height};\n\t\t\t\t\t\t\t\tthis.sendMsg(msg,'img');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 选择表情\n\t\tchooseEmoji(){\n\t\t\tthis.hideMore = true;\n\t\t\tif(this.hideEmoji){\n\t\t\t\tthis.hideEmoji = false;\n\t\t\t\tthis.openDrawer();\n\t\t\t}else{\n\t\t\t\tthis.hideDrawer();\n\t\t\t}\n\t\t},\n\t\t//添加表情\n\t\taddEmoji(em){\n\t\t\tthis.textMsg+=em.alt;\n\t\t},\n\t\t\n\t\t//获取焦点，如果不是选表情ing,则关闭抽屉\n\t\ttextareaFocus(){\n\t\t\tif(this.popupLayerClass=='showLayer' && this.hideMore == false){\n\t\t\t\tthis.hideDrawer();\n\t\t\t}\n\t\t},\n\t\t// 发送文字消息\n\t\tsendText(){\n\t\t\tthis.hideDrawer();//隐藏抽屉\n\t\t\tif(!this.textMsg){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// let content = this.replaceEmoji(this.textMsg);\n\t\t\tlet content = this.textMsg;\n\t\t\tlet msg = {text:content}\n\t\t\tthis.sendMsg(msg,'text');\n\t\t\tthis.textMsg = '';//清空输入框\n\t\t},\n\t\t// 发送消息\n\t\tsendMsg(content,type){\n\t\t\tvar params = {};\n\t\t\tswitch (type){\n\t\t\t\tcase \"text\":\n\t\t\t\t\tparams = {\n\t\t\t\t\t\t\"msgType\":type,\n\t\t\t\t\t\t\"type\":\"single\",\t// 消息类型，'single' / 'group' / 'chatRoom'\n\t\t\t\t\t\t\"username\":this.chartUser.username, // 接收人\n\t\t\t\t\t\t\"text\":content.text, // 文字内容\n\t\t\t\t\t};\n\t\t\t\t\t// console.log(\"文本消息传参：\" + JSON.stringify(params));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"img\":\n\t\t\t\t\tparams = {\n\t\t\t\t\t\t\"msgType\":type,\n\t\t\t\t\t\t\"type\":\"single\",\t// 消息类型，'single' / 'group' / 'chatRoom'\n\t\t\t\t\t\t\"username\":this.chartUser.username,// 接收人\n\t\t\t\t\t\t\"path\":content.url,\n\t\t\t\t\t\t\"extras\":{\"w\":content.w,\"h\":content.h},// 附加字段，宽度/高度\n\t\t\t\t\t};\n\t\t\t\t\t// console.log(\"图片消息传参：\" + JSON.stringify(params));\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"voice\":\n\t\t\t\t\t// 语音消息\n\t\t\t\t\tparams = {\n\t\t\t\t\t\t\"msgType\":type,\n\t\t\t\t\t\t\"type\":\"single\",\t// 消息类型，'single' / 'group' / 'chatRoom'\n\t\t\t\t\t\t\"username\":this.chartUser.username,// 接收人\n\t\t\t\t\t\t\"path\":content.url,\n\t\t\t\t\t\t\"extras\":{\"length\":content.length,\"duration\":content.duration},// 语音长度\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.$store.dispatch(\"submitChatMsg\", params).then(response => {\n\t\t\t\t// 成功\n\t\t\t\tconsole.log('成功')\n\t\t\t\tconsole.log(response)\n\t\t\t\tvar msg = this.setSingItem(response,\"user\");\n\t\t\t\t// if(type == \"text\"){\n\t\t\t\t// \t// 如果是文字，替换一下表情\n\t\t\t\t// \tcontent.text = _self.imUtils.replaceEmoji(msg.msg.content.text);\n\t\t\t\t// };\n\t\t\t\t// msg.msg.content = content; // 这里一定要加，是因为刚发出去的图片消息是是异步上传\n\t\t\t\t\n\t\t\t\t// 发送消息\n\t\t\t\tthis.screenMsg(msg);\n\t\t\t}, response => {\n\t\t\t\t// 失败\n\t\t\t\tconsole.log('失败')\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '发送失败',\n\t\t\t\t\tcontent: response,\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tcancelText: '',\n\t\t\t\t\tconfirmText: '关闭',\n\t\t\t\t});\n\t\t\t\tconsole.log(\"JMessagePlugin 发送消息失败：\" + JSON.stringify(response));\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 添加文字消息到列表\n\t\taddTextMsg(msg){\n\t\t\tconsole.log(111)\n\t\t\tconsole.log(msg)\n\t\t\tthis.msgList.push(msg);\n\t\t},\n\t\t// 添加语音消息到列表\n\t\taddVoiceMsg(msg){\n\t\t\tthis.msgList.push(msg);\n\t\t},\n\t\t// 添加图片消息到列表\n\t\taddImgMsg(msg){\n\t\t\tmsg.msg.content = this.setPicSize(msg.msg.content);\n\t\t\tthis.msgImgList.push(msg.msg.content.url);\n\t\t\tthis.msgList.push(msg);\n\t\t},\n\t\taddRedEnvelopeMsg(msg){\n\t\t\tthis.msgList.push(msg);\n\t\t},\n\t\t// 添加系统文字消息到列表\n\t\taddSystemTextMsg(msg){\n\t\t\tthis.msgList.push(msg);\n\t\t},\n\t\t// 添加系统红包消息到列表\n\t\taddSystemRedEnvelopeMsg(msg){\n\t\t\tthis.msgList.push(msg);\n\t\t},\n\t\t\n\t\tsendSystemMsg(content,type){\n\t\t\tlet lastid = this.msgList[this.msgList.length-1].msg.id;\n\t\t\tlastid++;\n\t\t\tlet row = {type:\"system\",msg:{id:lastid,type:type,content:content}};\n\t\t\tthis.screenMsg(row)\n\t\t},\n\t\t//领取详情\n\t\ttoDetails(rid){\n\t\t\tuni.navigateTo({\n\t\t\t\turl:'HM-details/HM-details?rid='+rid\n\t\t\t})\n\t\t},\n\t\t// 预览图片\n\t\tshowPic(msg){\n\t\t\tuni.previewImage({\n\t\t\t\tindicator:\"none\",\n\t\t\t\tcurrent:msg.content.url,\n\t\t\t\turls: this.msgImgList\n\t\t\t});\n\t\t},\n\t\t// 播放语音\n\t\tplayVoice(msg){\n\t\t\t// console.log(\"播放语音文件:\" + JSON.stringify(msg));\n\t\t\tthis.playMsgid=msg.id;\n\t\t\tthis.AUDIO.src = msg.content.url;\n\t\t\tthis.$nextTick(function() {\n\t\t\t\tthis.AUDIO.play();\n\t\t\t});\n\t\t},\n\t\t// 录音开始\n\t\tvoiceBegin(e){\n\t\t\tif(e.touches.length>1){\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tthis.initPoint.Y = e.touches[0].clientY;\n\t\t\tthis.initPoint.identifier = e.touches[0].identifier;\n\t\t\tthis.RECORDER.start({format:\"mp3\"});//录音开始,\n\t\t},\n\t\t//录音开始UI效果\n\t\trecordBegin(e){\n\t\t\tthis.recording = true;\n\t\t\tthis.voiceTis='松开 结束';\n\t\t\tthis.recordLength = 0;\n\t\t\tthis.recordTimer = setInterval(()=>{\n\t\t\t\tthis.recordLength++;\n\t\t\t},1000)\n\t\t},\n\t\t// 录音被打断\n\t\tvoiceCancel(){\n\t\t\tthis.recording = false;\n\t\t\tthis.voiceTis='按住 说话';\n\t\t\tthis.recordTis = '手指上滑 取消发送'\n\t\t\tthis.willStop = true;//不发送录音\n\t\t\tthis.RECORDER.stop();//录音结束\n\t\t},\n\t\t// 录音中(判断是否触发上滑取消发送)\n\t\tvoiceIng(e){\n\t\t\tif(!this.recording){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet touche = e.touches[0];\n\t\t\t//上滑一个导航栏的高度触发上滑取消发送\n\t\t\tif(this.initPoint.Y - touche.clientY>=uni.upx2px(100)){\n\t\t\t\tthis.willStop = true;\n\t\t\t\tthis.recordTis = '松开手指 取消发送'\n\t\t\t}else{\n\t\t\t\tthis.willStop = false;\n\t\t\t\tthis.recordTis = '手指上滑 取消发送'\n\t\t\t}\n\t\t},\n\t\t// 结束录音\n\t\tvoiceEnd(e){\n\t\t\tif(!this.recording){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.recording = false;\n\t\t\tthis.voiceTis='按住 说话';\n\t\t\tthis.recordTis = '手指上滑 取消发送'\n\t\t\tthis.RECORDER.stop();//录音结束\n\t\t},\n\t\t//录音结束(回调文件)\n\t\trecordEnd(e){\n\t\t\tclearInterval(this.recordTimer);\n\t\t\tif(!this.willStop){\n\t\t\t\tlet msg = {\n\t\t\t\t\tlength:0,\n\t\t\t\t\turl:e.tempFilePath,\n\t\t\t\t\tduration:this.recordLength,// 【**必传】，语音内容的持续时长. 单位是秒\n\t\t\t\t}\n\t\t\t\tlet min = parseInt(this.recordLength/60);\n\t\t\t\tlet sec = this.recordLength%60;\n\t\t\t\tmin = min<10?'0'+min:min;\n\t\t\t\tsec = sec<10?'0'+sec:sec;\n\t\t\t\tmsg.length = min+':'+sec;\n\t\t\t\t\n\t\t\t\t// console.log(\"发送语音: \" + JSON.stringify(msg));\n\t\t\t\tthis.sendMsg(msg,'voice');\n\t\t\t}else{\n\t\t\t\tconsole.log('取消发送录音');\n\t\t\t}\n\t\t\tthis.willStop = false;\n\t\t},\n\t\t// 切换语音/文字输入\n\t\tswitchVoice(){\n\t\t\tthis.hideDrawer();\n\t\t\tthis.isVoice = this.isVoice?false:true;\n\t\t},\n\t\tdiscard(){\n\t\t\treturn;\n\t\t}\n\t},\n\twatch: {\n\t\treceiveMessage(res) {\n\t\t\t// console.log(\"监听新消息事件\");\n\t\t\tif (res.fromUser.username == this.chartUser.username) {\n\t\t\t\t// 监听有收到新消息，并且接收人是当前用户\n\t\t\t\t// 重置会话消息未读数\n\t\t\t\tthis.jpushIM.resetUnreadMessageCount({\"type\":\"single\",\"username\":this.chartUser.username});\n\t\t\t\t\n\t\t\t\t// 在收到消息后更新\n\t\t\t\tvar msg = this.setSingItem(res,\"user\");\n\t\t\t\tthis.screenMsg(msg);\n\t\t\t\t\n\t\t\t\t// 消息设为已读\n\t\t\t\tthis.jpushIM.setMessageHaveRead({\n\t\t\t\t\t\"id\":res.messageId,\n\t\t\t\t\t\"type\":\"single\",\n\t\t\t\t\t\"username\":res.fromUser.username,\n\t\t\t\t}, (res) => {\n\t\t\t\t\tconsole.log(\"JS setMessageHaveRead:\" + JSON.stringify(res))\n\t\t\t\t})\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tsendMessageResponse(res){\n\t\t\t// 监听消息发送结果事件\n\t\t\t// console.log(res);\n\t\t\tif (res.toUser.username == this.chartUser.username) {\n\t\t\t\tvar list = this.msgList;\n\t\t\t\tfor(let i=0;i<list.length;i++){\n\t\t\t\t\tif(list[i].type=='user' && list[i].msg.messageId == res.messageId){\n\t\t\t\t\t\tlist[i].msg.status = res.status;\t\t// 状态变更\n\t\t\t\t\t\tlist[i].msg.messageId = res.messageId;\t// 本地数据库中的消息 Id。\n\t\t\t\t\t\tlist[i].msg.id = res.serverMessageId;\t// 服务器端对应的消息 Id\n\t\t\t\t\t\t// var msg = _self.setSingItem(res,\"user\");\n\t\t\t\t\t\t// list[i] = msg;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n}\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./im-chat.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./im-chat.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}