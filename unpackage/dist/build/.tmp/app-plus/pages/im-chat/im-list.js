(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/im-chat/im-list"],{7294:function(e,t,n){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("2f62");function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=function(){return n.e("components/uni-list-item/uni-list-item").then(n.bind(null,"c8af"))},u=function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-icons/uni-icons")]).then(n.bind(null,"779e"))},c=function(){return n.e("components/uni-badge/uni-badge").then(n.bind(null,"eb1e"))},l=function(){return n.e("components/uni-swipe-action/uni-swipe-action").then(n.bind(null,"d51d"))},f=function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-swipe-action-item/uni-swipe-action-item")]).then(n.bind(null,"42f6"))},m={components:{uniIcons:u,uniBadge:c,uniListItem:r,uniSwipeAction:l,uniSwipeActionItem:f},computed:s({},(0,a.mapState)(["hasLogin","loginProvider","nickname","avatar","receiveMessage","newFriendInvitiaon"])),data:function(){return{lists:[],options2:[{text:"删除",style:{backgroundColor:"#FF3A30"}}]}},onShow:function(){this,this.getList()},onPullDownRefresh:function(){this.getList()},watch:{receiveMessage:function(t){e("log","监听到新消息，更新列表"," at pages\\im-chat\\im-list.vue:92"),this.getList()}},methods:{bindClick:function(e){var t=this,n={type:"single",username:e.target.username};this.jpushIM.deleteConversation(n,function(e){0==e.errorCode?t.getList():i.showModal({title:"删除失败",content:"原因："+e.errorMsg,showCancel:!1,cancelText:"",confirmText:"关闭"})})},getList:function(){var e=this;i.stopPullDownRefresh(),this.jpushIM.getConversations(function(t){var n=e.setList(t);e.lists=n})},setList:function(e){var t=this,n=[];return e.forEach(function(e){e&&(e.latestMessage?("img"==e.latestMessage.messageType?e.lastMessageText="[图片]":"voice"==e.latestMessage.messageType?e.lastMessageText="[语音]":e.lastMessageText=e.latestMessage.messageString,e.lastMessageTime=t.dateUtils.formatDateTime(e.latestMessage.timestamp,"str")):(e.lastMessageText="",e.lastMessageTime=""),e.avatar=e.target.avatar?e.target.avatar:"../../static/chat_icon.png",n.push(e))}),n},chatDetail:function(e){var t={username:e.target.username,nickname:e.target.nickname,avatar:e.target.avatar};i.navigateTo({url:"im-chat?title="+e.title+"&fromUser="+JSON.stringify(t)})}}};t.default=m}).call(this,n("0de9")["default"],n("6e42")["default"])},9217:function(e,t,n){"use strict";var i={"uni-swipe-action":()=>n.e("components/uni-swipe-action/uni-swipe-action").then(n.bind(null,"d51d")),"uni-swipe-action-item":()=>Promise.all([n.e("common/vendor"),n.e("components/uni-swipe-action-item/uni-swipe-action-item")]).then(n.bind(null,"42f6"))},a=function(){var e=this,t=e.$createElement;e._self._c},s=[];n.d(t,"b",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return i})},bd58:function(e,t,n){"use strict";var i=n("faae"),a=n.n(i);a.a},c4f3:function(e,t,n){"use strict";(function(e){n("7754"),n("921b");i(n("66fd"));var t=i(n("ea95"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},ea95:function(e,t,n){"use strict";n.r(t);var i=n("9217"),a=n("f23e");for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);n("bd58");var o,r=n("f0c5"),u=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);t["default"]=u.exports},f23e:function(e,t,n){"use strict";n.r(t);var i=n("7294"),a=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);t["default"]=a.a},faae:function(e,t,n){}},[["c4f3","common/runtime","common/vendor"]]]);